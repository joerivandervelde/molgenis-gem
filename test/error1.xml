<?xml version="1.0" encoding="UTF-8"?> 
<!--DOCTYPE molgenis PUBLIC "MOLGENIS 1.0" "http://molgenis.sourceforge.net/dtd/molgenis_v_1_0.dtd"-->
<molgenis2 name="example" label="My First MOLGENIS">
	<description>This is an minimal example database to show how
		MOLGENIS works. The purpose of this example database is to
		administrate experiment, samples, traits and measurements. The
		name='example' will result in a Java package 'example' being
		generated.</description>
	<!-- abstract data types -->
	<entity name="Identifiable" abstract="true">
		<description>For modeling purposes only (denoted by
			abstract='true', this entity defines fields id and name centrally.
		</description>
		<field name="Id" type="autoid" description="autogenerated id number (autoid)" />
		<field name="Name" unique="true" readonly="true"
			description="unique, user provided name string" />
	</entity>
	<!-- experiment structure -->
	<entity name="Experiment" implements="Identifiable" xref_label="Name">
		<description>Summary of an experiment.</description>
		<field name="Description" type="text" nillable="true"
			description="Optional description text" />
		<field name="Date" type="date" auto="true"
			description="Creation date, with an automatic default to 'today'" />
	</entity>
	<!-- sample description structure -->
	<entity name="Sample" implements="Identifiable">
		<description>Samples that are part of an experiment.
		</description>
		<field name="Species" default="Arabidopsis thaliana"
			description="Species, default to Arabidopsis" />
		<field name="Tissue" nillable="true" description="Optional specification of tissue" />
		<field name="Sex" type="enum" enum_options="[male,female,unknown]"
			description="Fixed choice on Sex" />
		<field name="Experiment" type="xref" xref_field="Experiment.Id"
			description="Samples are part-of one experiment (by cross reference to Experiment.id)" />
		<field name="SampleTime" type="datetime"/>
	</entity>
	<entity name="SpecialSample" extends="Sample">
		<field name="detail" />
	</entity>
	<!-- trait description structure -->
	<entity name="Trait" implements="Identifiable">
		<description>Traits that are studied in this experiment.
		</description>
		<field name="Molcular" type="bool"
			description="Indication whether this is a molecular trait" />
		<field name="Experiment" type="xref" xref_field="Experiment.Id"
			xref_label="Name"
			description="Traits are defined per experiment (by cross reference to Experiment.id)" />
	</entity>
	<!-- trait description structure -->
	<entity name="Measurement" implements="Identifiable">
		<description>Measurements (i.e. set of trait observations
			per sample) that are part of an experiment.</description>
		<field name="Experiment" type="xref" xref_field="Experiment.Id"
			xref_label="Name" description="Measurements are part-of one experiment" />
		<field name="DataFile" type="file"
			description="A file attachment that summarizes the results" />
	</entity>
	<entity name="Data">
		<description>Data values (observations) of a measurement. Note:
			Data doesn't inherit from Identifiable because it has no unique name.
		</description>
		<field name="Id" type="autoid" description="autogenerated id number" />
		<field name="Measurement" type="xref" xref_field="Measurement.id"
			xref_label="Name" description="Data values are part-of one Measurement" />
		<field name="Sample" type="xref" xref_field="Sample.Id"
			xref_label="Name" description="The sample this measurement is on" />
		<field name="Trait" type="xref" xref_field="Trait.Id"
			xref_label="Name" description="The trait this measurement is on" />
		<field name="Value" description="The value measured/calculated" />
		<unique fields="Measurement,Sample,Trait" description="There can be only one value per Sample X Trait" />
	</entity>
</molgenis2>
